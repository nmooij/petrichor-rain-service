{% extends "base.xml" %}
{% block content %}

<grammar mode="dtmf" version="1.0" root="AddInput">
  <rule id="zerotonine" scope="public">
    <one-of>
      <item repeat="0-">
        <one-of>
          <item>0</item>
          <item>1</item>
          <item>2</item>
          <item>3</item>
          <item>4</item>
          <item>5</item>
          <item>6</item>
          <item>7</item>
          <item>8</item>
          <item>9</item>
        </one-of>
      </item>
    </one-of>
  </rule>
</grammar>

<form id="input_form">
 <property name="inputmodes" value="dtmf"/>
 <property name="interdigittimeout" value="2s"/>
 <property name="timeout" value="4s"/>
 <property name="termchar" value="#" />
  <field name="DTMF input" type="digits?maxlength=5">
<prompt>
<audio src="{{ voice_label }}"/>
</prompt>


{%  if record.ask_confirmation %}

    <field name="confirm">
        <prompt>
        <audio src="{{ask_confirmation_voice_label}}"/>
        </prompt>
        <grammar xml:lang="en-US" root = "MYRULE" mode="dtmf">
              <rule id="MYRULE" scope = "public">
                <one-of>
                    <item>1</item>
                    <item>2</item>
                </one-of>
               </rule>
             </grammar>
          <filled>
              <if cond="confirm == '1'">
                  <prompt>
                      <audio src="{{final_voice_label}}"/>
                  </prompt>
                  <assign name="redirect" expr="'{{ redirect_url }}'"/>
                  <submit next="{{ url }}" enctype="multipart/form-data" method="post" namelist="redirect recording"/>
           </if>
              <if cond="confirm == '2'">
            <goto next="{{ url }}"/>
           </if>
          </filled>
 </field>

{% endif %}


<block>
    <prompt>
        <audio src="{{final_voice_label}}"/>
    </prompt>
    <goto next="{{ redirect_url }}" />
</block>




</form>

{% endblock %}
